<% content_for :title, "ブログ一覧" %>

<h1>ブログ一覧</h1>

<%= turbo_frame_tag "posts", data: { turbo_action: :advance } do %>
  <%= paginate @posts %>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>画像</th>
        <th>タイトル</th>
        <th>公開日</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%= link_to post.id, admin_post_path(post), data: { turbo_frame: "_top" } %></td>
          <td><%= post.image.attached? ? image_tag(post.image.variant(:list).processed) : "" %></td>
          <td><%= post.title %></td>
          <td><%= l(post.published_at, format: :long) %></td>
          <td>
            <%= link_to "編集", edit_admin_post_path(post), data: { turbo_frame: "_top" } %>
            <%= link_to "削除", admin_post_path(post), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？", turbo_frame: "_top" } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= paginate @posts %>
<% end %>

<%= link_to "新規ブログ", new_admin_post_path %>
